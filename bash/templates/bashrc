# This file was automatically generated from a template.
# To chage it, update '${REPO_PATH}/bash/templates/bashrc'
# and re-generate this file with `make build`.


# Source global definitions
if [ -f /etc/bashrc ]; then
  . /etc/bashrc
fi
if [ -f ~/.system.bashrc ]; then
  . ~/.system.bashrc
fi

# Source system secrets
if [ -f ~/.secret.bashrc ]; then
  . ~/.secret.bashrc
fi

# Source custom bash files from this repo.
. "${REPO_PATH}/bash/aliases"


# Additional PATH config and external setup.
export PATH="$PATH:$HOME/bin:$HOME/.local/bin:$HOME/go/bin"
[ -s "$HOME/.cargo/env" ] && . "$HOME/.cargo/env"


# Load powerline.
if which powerline-daemon > /dev/null 2> /dev/null; then
  powerline-daemon -q
  POWERLINE_BASH_CONTINUATION=1
  POWERLINE_BASH_SELECT=1
  . ${POWER_ROOT}/bindings/bash/powerline.sh
fi


# Configure GPG Agent
#  Ensure the gpg-agent is running.
gpg-connect-agent /bye
export GPG_AGENT_INFO="/run/user/$(id -u)/gnupg/S.gpg-agent:$(pgrep gpg-agent):1"


# Enable asdf-vm & bash completion for it.
export ASDFVM_HOME="${REPO_PATH}/bash/extentions/asdf"
[ -s "${ASDFVM_HOME}/asdf.sh" ] && . "${ASDFVM_HOME}/asdf.sh"
[ -s "${ASDFVM_HOME}/completions/asdf.bash" ] && . "${ASDFVM_HOME}/completions/asdf.bash"


### TODO: deprecate in favour of asdf ###
# Enable NVM & Bash completion
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && . "$NVM_DIR/bash_completion"
# Clear possible non-0 $? left by not having files.
true
